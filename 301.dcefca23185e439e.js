"use strict";(self.webpackChunkangular_sandbox=self.webpackChunkangular_sandbox||[]).push([[301],{9301:(oe,S,o)=>{o.r(S),o.d(S,{SuperheroesModule:()=>te});var C=o(433),d=o(646),$=o(3115),F=o(3535),j=o(4907),P=o(1448),B=o(8532),D=o(7372),u=o(6020),V=o(7357);const A=["addListener","removeListener"],G=["addEventListener","removeEventListener"],R=["on","off"];function m(n,c,e,r){if((0,u.T)(e)&&(r=e,e=void 0),r)return m(n,c,e).pipe((0,V.I)(r));const[s,i]=function J(n){return(0,u.T)(n.addEventListener)&&(0,u.T)(n.removeEventListener)}(n)?G.map(h=>a=>n[h](c,a,e)):function z(n){return(0,u.T)(n.addListener)&&(0,u.T)(n.removeListener)}(n)?A.map(E(n,c)):function H(n){return(0,u.T)(n.on)&&(0,u.T)(n.off)}(n)?R.map(E(n,c)):[];if(!s&&(0,D.X)(n))return(0,B.Z)(h=>m(h,c,e))((0,j.Tg)(n));if(!s)throw new TypeError("Invalid event target");return new P.c(h=>{const a=(...p)=>h.next(1<p.length?p:p[0]);return s(a),()=>i(a)})}function E(n,c){return e=>r=>n[e](c,r)}var Q=o(3073),t=o(4072),f=o(7090),Y=o(1327),K=o(8517),x=o(4278),g=o(1399),T=o(8951),b=o(589),U=o(9961);let I=(()=>{class n{constructor(e,r){this.http=e,this.store=r}getSuperheroById(e){return new Promise((r,s)=>{(0,f._)(this.http.get(`${g.c.api.superheroes}/${e}`)).then(i=>{r(new x.e(i))}).catch(()=>s())})}getSuperheroBySearch(e){var r=this;return new Promise((s,i)=>{(0,f._)(this.http.get(`${g.c.api.superheroes}/search/${e}`)).then(function(){var h=(0,d.A)(function*(a){a.error&&i();const p=yield(0,f._)(r.store.select(T.C)),O=a.results?.map(y=>new x.e(y,p.includes(parseInt(y.id))))??[];s(O)});return function(a){return h.apply(this,arguments)}}()).catch(()=>i())})}getSuperheroes(e){var r=this;return new Promise(function(){var s=(0,d.A)(function*(i,h){const a=g.c.totalEntries,p=g.c.pageSize,O=Math.ceil(a/10),L=p*(Math.min(Math.max(1,e),O)-1),ne=Math.min(p,Math.abs(a-L)),re=yield(0,f._)(r.store.select(T.C));(0,f._)((0,Y.p)([...Array(ne)].map((l,M)=>M+1+L).map(l=>r.http.get(`${g.c.api.superheroes}/${l}`))).pipe((0,K.T)(l=>l.map(M=>new x.e(M,re.includes(parseInt(M.id))))))).then(l=>i(l)).catch(()=>h())});return function(i,h){return s.apply(this,arguments)}}())}static{this.\u0275fac=function(r){return new(r||n)(t.KVO(b.Qq),t.KVO(U.il))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var W=o(1202),v=o(5605),X=o(3578);const N=["input"];function Z(n,c){if(1&n&&(t.j41(0,"li",12),t.nrm(1,"app-thumb",13),t.k0s()),2&n){const e=c.$implicit;t.R7$(),t.Y8G("superhero",e)}}let w=(()=>{class n{constructor(e){this.superhero=e,this.page=1,this.search="",this.superheroes$=new $.t([])}ngOnInit(){this.loadSuperheroes()}ngAfterViewInit(){this.searchListen(),this.scrollListen()}ngOnDestroy(){this.page=1}onSearch(){this.search.length>0&&this.loadSuperheroes()}loadSuperheroes(){var e=this;return(0,d.A)(function*(){e.search.length>0?e.paginateSearch():e.paginate()})()}paginateSearch(){var e=this;return(0,d.A)(function*(){e.page=1,e.superheroes$.next([]);try{const r=yield e.superhero.getSuperheroBySearch(e.search);e.superheroes$.next(r)}catch{}})()}paginate(){var e=this;return(0,d.A)(function*(){1===e.page&&e.superheroes$.next([]);const r=yield e.superhero.getSuperheroes(e.page++),s=[...e.superheroes$.getValue(),...r];e.superheroes$.next(s)})()}searchListen(){(0,F.h)(m(this.input.nativeElement,"search"),m(this.input.nativeElement,"input")).pipe((0,Q.B)(300)).subscribe(()=>this.loadSuperheroes())}scrollListen(){const e=document.querySelector("#cardLoader");new IntersectionObserver((i,h)=>{i.forEach(a=>{a.isIntersecting&&this.loadSuperheroes()})},{rootMargin:"0px",threshold:.1}).observe(e)}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(I))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-superheroes"]],viewQuery:function(r,s){if(1&r&&t.GBs(N,5),2&r){let i;t.mGM(i=t.lsd())&&(s.input=i.first)}},standalone:!1,decls:17,vars:5,consts:[["input",""],[1,"root"],[1,"title"],[1,"content"],[1,"input","input--search"],[1,"input__label"],[1,"material-symbols-outlined","input__icon"],["autocomplete","","type","search","placeholder","Search for a superhero...",1,"input__field",3,"ngModelChange","ngModel"],[1,"superheroes-wrapper"],[1,"superheroes"],["class","superheroe",4,"ngFor","ngForOf"],["id","cardLoader",3,"hidden"],[1,"superheroe"],[3,"superhero"]],template:function(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",1)(1,"h2",2),t.EFF(2,"Superheroes"),t.k0s(),t.j41(3,"div",3)(4,"label",4)(5,"span",5)(6,"span",6),t.EFF(7,"search"),t.k0s(),t.EFF(8," Search "),t.k0s(),t.j41(9,"input",7,0),t.mxI("ngModelChange",function(a){return t.eBV(i),t.DH7(s.search,a)||(s.search=a),t.Njj(a)}),t.k0s()(),t.j41(11,"div",8)(12,"ul",9),t.DNE(13,Z,2,1,"li",10),t.nI1(14,"async"),t.k0s(),t.j41(15,"div",11),t.nrm(16,"app-loader"),t.k0s()()()()}2&r&&(t.R7$(9),t.R50("ngModel",s.search),t.R7$(4),t.Y8G("ngForOf",t.bMT(14,3,s.superheroes$)),t.R7$(2),t.Y8G("hidden",s.search.length>0))},dependencies:[C.Sq,W.M,v.me,v.BC,v.vS,X.V,C.Jj],styles:[".root[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;color:#1f1f1f;font-family:Bangers,cursive}.root[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:72px;margin-top:-24px}.root[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:18px;font-weight:400}.root[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:20px;margin-top:20px;border-radius:5px;background-color:#2727276e}.superheroes-wrapper[_ngcontent-%COMP%]   .superheroes[_ngcontent-%COMP%]{margin:0 0 30px;padding:0;list-style-type:none;display:grid;grid-gap:30px;grid-template-columns:repeat(5,1fr)}",".input[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;flex-direction:column}.input__label[_ngcontent-%COMP%]{color:#fff;font-weight:100;margin-bottom:5px;transition-duration:.2s;transition-property:color;display:flex;align-items:center}.input__icon[_ngcontent-%COMP%]{font-size:22px;margin-right:5px}.input__field[_ngcontent-%COMP%]{border:none;border-radius:5px;padding:10px 15px;background-color:#fff;font-weight:400;font-family:Noto Sans Display,sans-serif;transition-duration:.2s;transition-property:outline}.input__field[_ngcontent-%COMP%]:focus, .input__field[_ngcontent-%COMP%]:active{outline:none}.input__field[_ngcontent-%COMP%]:focus{outline:2px solid #080808}.input__error[_ngcontent-%COMP%]{margin:5px 0 0;font-size:14px;font-weight:300;color:#ff6e6e}.input[_ngcontent-%COMP%]:focus-within   .input__label[_ngcontent-%COMP%]{font-weight:500}"]})}}return n})();var k=o(4365),q=o(7141),_=o(6941);let ee=(()=>{class n{constructor(e){this.superheroes=e}resolve(e,r){return new P.c(s=>{const i=parseInt(e.paramMap.get("id")??"");this.superheroes.getSuperheroById(i).then(h=>s.next(h)).catch(h=>s.error(h))})}static{this.\u0275fac=function(r){return new(r||n)(t.KVO(I))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),te=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[C.MD,q.f,v.YN,_.i,k.iI.forChild([{path:"",component:w},{path:":id",loadChildren:()=>o.e(425).then(o.bind(o,1425)).then(e=>e.DetailModule),resolve:{superhero:ee}}])]})}}return n})()}}]);