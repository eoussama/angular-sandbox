"use strict";(self.webpackChunkangular_sandbox=self.webpackChunkangular_sandbox||[]).push([[865],{6865:(st,S,s)=>{s.r(S),s.d(S,{SuperheroesModule:()=>nt});var C=s(3011),d=s(3241),F=s(1879),$=s(8637),A=s(7368),Z=s(985),I=s(1512),J=s(5751),u=s(2916),B=s(7817);const N=["addListener","removeListener"],Q=["addEventListener","removeEventListener"],j=["on","off"];function m(r,n,c,t){if((0,u.m)(c)&&(t=c,c=void 0),t)return m(r,n,c).pipe((0,B.Z)(t));const[o,a]=function D(r){return(0,u.m)(r.addEventListener)&&(0,u.m)(r.removeEventListener)}(r)?Q.map(i=>h=>r[i](n,h,c)):function G(r){return(0,u.m)(r.addListener)&&(0,u.m)(r.removeListener)}(r)?N.map(L(r,n)):function U(r){return(0,u.m)(r.on)&&(0,u.m)(r.off)}(r)?j.map(L(r,n)):[];if(!o&&(0,J.z)(r))return(0,I.z)(i=>m(i,n,c))((0,A.Xf)(r));if(!o)throw new TypeError("Invalid event target");return new Z.y(i=>{const h=(...p)=>i.next(1<p.length?p:p[0]);return o(h),()=>a(h)})}function L(r,n){return c=>t=>r[c](n,t)}var Y=s(3233),e=s(7029),f=s(9477),V=s(4395),X=s(1745),O=s(5198),g=s(7055),z=s(2202),b=s(6739),H=s(7476);let E=(()=>{const n=class{constructor(t,o){this.http=t,this.store=o}getSuperheroById(t){return new Promise((o,a)=>{(0,f.z)(this.http.get(`${g.N.api.superheroes}/${t}`)).then(i=>{o(new O.j(i))}).catch(()=>a())})}getSuperheroBySearch(t){var o=this;return new Promise((a,i)=>{(0,f.z)(this.http.get(`${g.N.api.superheroes}/search/${t}`)).then(function(){var h=(0,d.Z)(function*(p){p.error&&i();const y=yield(0,f.z)(o.store.select(z.T)),P=p.results?.map(M=>new O.j(M,y.includes(parseInt(M.id))))??[];a(P)});return function(p){return h.apply(this,arguments)}}()).catch(()=>i())})}getSuperheroes(t){var o=this;return new Promise(function(){var a=(0,d.Z)(function*(i,h){const p=g.N.totalEntries,y=g.N.pageSize,P=Math.ceil(p/10),T=y*(Math.min(Math.max(1,t),P)-1),rt=Math.min(y,Math.abs(p-T)),ot=yield(0,f.z)(o.store.select(z.T));(0,f.z)((0,V.D)([...Array(rt)].map((l,x)=>x+1+T).map(l=>o.http.get(`${g.N.api.superheroes}/${l}`))).pipe((0,X.U)(l=>l.map(x=>new O.j(x,ot.includes(parseInt(x.id))))))).then(l=>i(l)).catch(()=>h())});return function(i,h){return a.apply(this,arguments)}}())}};let r=n;return n.\u0275fac=function(o){return new(o||n)(e.LFG(b.eN),e.LFG(H.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var R=s(7833),v=s(553),K=s(9483);const W=["input"];function w(r,n){if(1&r&&(e.TgZ(0,"li",12),e._UZ(1,"app-thumb",13),e.qZA()),2&r){const c=n.$implicit;e.xp6(1),e.Q6J("superhero",c)}}let k=(()=>{const n=class{constructor(t){this.superhero=t,this.page=1,this.search="",this.superheroes$=new F.X([])}ngOnInit(){this.loadSuperheroes()}ngAfterViewInit(){this.searchListen(),this.scrollListen()}ngOnDestroy(){this.page=1}onSearch(){this.search.length>0&&this.loadSuperheroes()}loadSuperheroes(){var t=this;return(0,d.Z)(function*(){t.search.length>0?t.paginateSearch():t.paginate()})()}paginateSearch(){var t=this;return(0,d.Z)(function*(){t.page=1,t.superheroes$.next([]);try{const o=yield t.superhero.getSuperheroBySearch(t.search);t.superheroes$.next(o)}catch{}})()}paginate(){var t=this;return(0,d.Z)(function*(){1===t.page&&t.superheroes$.next([]);const o=yield t.superhero.getSuperheroes(t.page++),a=[...t.superheroes$.getValue(),...o];t.superheroes$.next(a)})()}searchListen(){(0,$.T)(m(this.input.nativeElement,"search"),m(this.input.nativeElement,"input")).pipe((0,Y.b)(300)).subscribe(()=>this.loadSuperheroes())}scrollListen(){const t=document.querySelector("#cardLoader");new IntersectionObserver((i,h)=>{i.forEach(p=>{p.isIntersecting&&this.loadSuperheroes()})},{rootMargin:"0px",threshold:.1}).observe(t)}};let r=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-superheroes"]],viewQuery:function(o,a){if(1&o&&e.Gf(W,5),2&o){let i;e.iGM(i=e.CRH())&&(a.input=i.first)}},decls:17,vars:5,consts:[[1,"root"],[1,"title"],[1,"content"],[1,"input","input--search"],[1,"input__label"],[1,"material-symbols-outlined","input__icon"],["autocomplete","","type","search","placeholder","Search for a superhero...",1,"input__field",3,"ngModel","ngModelChange"],["input",""],[1,"superheroes-wrapper"],[1,"superheroes"],["class","superheroe",4,"ngFor","ngForOf"],["id","cardLoader",3,"hidden"],[1,"superheroe"],[3,"superhero"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Superheroes"),e.qZA(),e.TgZ(3,"div",2)(4,"label",3)(5,"span",4)(6,"span",5),e._uU(7,"search"),e.qZA(),e._uU(8," Search "),e.qZA(),e.TgZ(9,"input",6,7),e.NdJ("ngModelChange",function(h){return a.search=h}),e.qZA()(),e.TgZ(11,"div",8)(12,"ul",9),e.YNc(13,w,2,1,"li",10),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"app-loader"),e.qZA()()()()),2&o&&(e.xp6(9),e.Q6J("ngModel",a.search),e.xp6(4),e.Q6J("ngForOf",e.lcZ(14,3,a.superheroes$)),e.xp6(2),e.Q6J("hidden",a.search.length>0))},dependencies:[C.sg,R.N,v.Fj,v.JJ,v.On,K.R,C.Ov],styles:[".root[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;color:#1f1f1f;font-family:Bangers,cursive}.root[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:72px;margin-top:-24px}.root[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:18px;font-weight:400}.root[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:20px;margin-top:20px;border-radius:5px;background-color:#2727276e}.superheroes-wrapper[_ngcontent-%COMP%]   .superheroes[_ngcontent-%COMP%]{margin:0 0 30px;padding:0;list-style-type:none;display:grid;grid-gap:30px;grid-template-columns:repeat(5,1fr)}",".input[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;flex-direction:column}.input__label[_ngcontent-%COMP%]{color:#fff;font-weight:100;margin-bottom:5px;transition-duration:.2s;transition-property:color;display:flex;align-items:center}.input__icon[_ngcontent-%COMP%]{font-size:22px;margin-right:5px}.input__field[_ngcontent-%COMP%]{border:none;border-radius:5px;padding:10px 15px;background-color:#fff;font-weight:400;font-family:Noto Sans Display,sans-serif;transition-duration:.2s;transition-property:outline}.input__field[_ngcontent-%COMP%]:focus, .input__field[_ngcontent-%COMP%]:active{outline:none}.input__field[_ngcontent-%COMP%]:focus{outline:2px solid #080808}.input__error[_ngcontent-%COMP%]{margin:5px 0 0;font-size:14px;font-weight:300;color:#ff6e6e}.input[_ngcontent-%COMP%]:focus-within   .input__label[_ngcontent-%COMP%]{font-weight:500}"]}),r})();var q=s(5958),_=s(642),tt=s(8760);let et=(()=>{const n=class{constructor(t){this.superheroes=t}resolve(t,o){return new Z.y(a=>{const i=parseInt(t.paramMap.get("id")??"");this.superheroes.getSuperheroById(i).then(h=>a.next(h)).catch(h=>a.error(h))})}};let r=n;return n.\u0275fac=function(o){return new(o||n)(e.LFG(E))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})(),nt=(()=>{const n=class{};let r=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.ez,_.P,v.u5,tt.q,q.Bz.forChild([{path:"",component:k},{path:":id",loadChildren:()=>s.e(632).then(s.bind(s,6632)).then(t=>t.DetailModule),resolve:{superhero:et}}])]}),r})()}}]);